{% extends '::layout.html.twig' %}

{% block title %}Accueil - Décibels{% endblock %}

{% block banniere %}
		
<div id="carousel" class="carousel slide" data-ride="carousel">
  <!-- Wrapper for slides -->
  <div class="carousel-inner" role="listbox">
  {% for img in listImg %}
    <div class="item">
		<img src="{{ asset('uploads/carrousel/' ~ img.picture.name) }}" alt="carrousel-{{ loop.index }}" width="{{ 1000 * img.zoom }} px" style="position: absolute; top: {{ img.topClip / img.ratio }}px; left: {{ img.leftClip / img.ratio }}px; max-width: none; clip: rect({{ -img.topClip / img.ratio }}px, {{ -img.leftClip / img.ratio + 1000 }}px, {{ -img.topClip / img.ratio + 450}}px, {{ -img.leftClip / img.ratio}}px);"/>
    </div>
   {% endfor %}
  </div>

  <!-- Controls -->
  <a class="left carousel-control" href="#carousel" role="button" data-slide="prev" style="background-image: linear-gradient(to left, rgba(89, 24, 32, 0.0001) 0, rgba(89, 24, 32, 0.5) 100%);">
    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true" style="font-size: 50px; color: #FFEB3B; left: 20%;"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="right carousel-control" href="#carousel" role="button" data-slide="next" style="background-image: linear-gradient(to right, rgba(89, 24, 32, 0.0001) 0, rgba(89, 24, 32, 0.5) 100%);">
    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true" style="font-size: 50px; color: #FFEB3B; right: 20%;"></span>
    <span class="sr-only">Next</span>
  </a>
</div>
{% endblock %}	

{% block body %}
	<div>
	{% for entity in entities %}
		<div style="padding: 5px; box-shadow: 0px 1px #591820;">
			<h4 class="text-center" style="color: #591820; font-weight: bold;">{{ entity.title }}</h4>
				{{ (entity.text|length > 255 ? entity.text|slice(0, 255) ~ '...' : entity.text)|raw  }}<br />
				<div class="text-right" style="min-widht: 100%;">Publiée le : {{ entity.date|date('Y-m-d') }} à {{ entity.date|date('H:i') }}</div>
				<a href="{{ path('decibels_news_show', { 'id': entity.id }) }}"><span class ='glyphicon glyphicon-chevron-right' style="top: 2px;"></span> Voir la news complète</a>
				<div class="fb-like" data-href="{{ path('decibels_news_show', { 'id': entity.id }) }}" data-layout="button" data-action="like" data-show-faces="false" data-share="true" style="float: right;"></div>
		</div>
	{% endfor %}
	</div>
{% endblock %}

{% block javascript %}
<script>
	$().ready(function (){
		$(".carousel-inner").children().first().addClass("active");
		var img = $("#carousel img");
		var indexImg = img.length - 1;
		var i = 0;
		
		var icons = '<ol class="carousel-indicators">';
		for(j = 0; j <= indexImg; j++)
		{
			icons += '<li data-target="#carousel" data-slide-to="' + j + '"></li>'
		}
		icons += "</ol>"
		$("#carousel").append(icons);
		
		$(".carousel-indicators li").first().addClass("active");
	});
</script>
{% endblock %}

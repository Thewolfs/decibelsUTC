<!DOCTYPE html>
<html>
<head>
	<title>{% block title %}{% endblock %}</title>
	<meta charset="UTF-8" />
	<meta name="description" content="Association Décibels UTC, Sonorisation, Enregistrement et Light" />
	<meta name="keywords" content="Décibels, Sono, Light, Matériel" />
	<meta name="author" content="Louis Duprat">
	<link rel="stylesheet" href="{{ asset('design/css/bootstrap.css') }}"/>
	<link rel="shortcut icon" href="{{ asset('favicon.ico') }}" type="image/x-icon">
	<link rel="icon" href="{{ asset('favicon.ico') }}" type="image/x-icon">
	<script src="{{ asset('design/js/jquery-1.11.3.min.js') }}"></script>
</head>
<body>
	<div  class="container" style="max-width: 980px;">
	<div class="page-header">
	<header class="row" style="max-width: 1300px; margin: auto; position: relative;">
		<div class="pseudoCenter col-md-12">
			<div class="text-center" style="padding-left: 30px;">
				<a style="position: relative; width: 90px; height: 90px; float: left; z-index: 6; display: block;" href="{{ path('decibels_homepage') }}">
					<svg height="90px" width="90px" style="float: left" id="logo" preserveAspectRatio="xMidYMid meet" viewBox="0 0 100 100">
						<defs>
							<filter id="blur">
								<feGaussianBlur stdDeviation="5" in="SourceGraphic"/>
							</filter>
						</defs>
						<circle cx="50%" cy="50%" r="42%" fill="#F3F3F3"  filter="url(#blur)"></circle>
						<image xlink:href="{{ asset('design/img/logo.png') }}" width="100%" height="100%"></image>
					</svg>
				</a>
			</div>
			<div class="text-center" style="padding-right: 30px;">
				<div style="position: relative; width: 90px; height: 90px; float: right; z-index: 6; cursor: pointer;">
					<svg height="90px" width="90px" style="float: right;"  preserveAspectRatio="xMidYMid meet" viewBox="0 0 100 100" id="user">
						<defs>
							<filter id="blur">
								<feGaussianBlur stdDeviation="5" />
							</filter>
							<mask id="mask">
								<circle cx="50%" cy="50%" r="42%" filter="url(#blur)" fill="white"></circle>
							</mask>
						</defs>
						<circle cx="50%" cy="50%" r="42%" filter="url(#blur)" fill="#F3F3F3"></circle>
						<g>
						{% if app.user  %}
							<image xlink:href="https://demeter.utc.fr/pls/portal30/portal30.get_photo_utilisateur?username={{ app.user.username }}" width="100%" height="100%" preserveAspectRatio="xMinYMin slice" mask="url(#mask)"></image>
						{% else %}
							<image xlink:href="{{ asset('design/img/inconnu.png') }}" width="100%" height="100%" mask="url(#mask)"></image>
						{% endif %}
						</g>
					</svg>
				</div>
				<div id="info" style="position: relative; float: right; right: -120px; top: 70px; height: 0;">
					<svg preserveAspectRatio="none" viewbox="0 0 50 50" height="15px" width="25px" style="position: relative; float: right; right: 62.5px; z-index: 8;">
						<polygon points="0,50 50,50 25,0" fill="#F3F3F3"/>
						<path stroke="#591820" d="M0 50 l25 -50" stroke-width="5"/>
						<path stroke="#591820" d="M25 0 l25 50" stroke-width="5"/>
					</svg>
					<div style="position: relative; width: 275px; height: 325px; background-color: #F3F3F3; top: 13px; right: 5px; border: 2px solid #591820; border-radius: 15px; z-index: 7;">
						{% if app.user  %}
							<h3>{{ app.user.username }}</h3>
							<svg height="110px" width="110px" preserveAspectRatio="xMidYMid meet" viewBox="0 0 100 100" id="user">
								<image xlink:href="https://demeter.utc.fr/pls/portal30/portal30.get_photo_utilisateur?username={{ app.user.username }}" width="100%" height="100%" preserveAspectRatio="xMinYMin slice" mask="url(#mask)"></image>
							</svg><br/>
							Rôle : {{ app.user.roleAsso }}<br />
							{% if app.user.roles[0] == "ROLE_ADMIN" %}
								<a style="color: #591820;" href="{{ path('decibels_admin_index') }}">Accès Membre</a><br />
							{% endif %}
							<a style="color: #591820;" href="{{ path('decibels_logout') }}">Se déconnecter</a>
						{% else %}
							<h3>Qui êtes-vous ?</h3>
							<svg height="110px" width="110px" preserveAspectRatio="xMidYMid meet" viewBox="0 0 100 100" id="user">
								<image xlink:href="{{ asset('design/img/inconnu.png') }}" width="100%" height="100%" preserveAspectRatio="xMinYMin slice" mask="url(#mask)"></image>
							</svg><br/>
							<a style="color: #591820;" href="{{ path('decibels_login') }}">Se connecter</a>
						{% endif %}
					</div>
				</div>
			</div>
			<div id="title" style="width: 100%; position: absolute; float: left;" class="text-center">
				<h1 style="margin: 0; color: #F3F3F3;">Décibels UTC</h1>
			</div>
		</div>
		<nav class="nav navbar-right" style="position: absolute; top: 69.5px; z-index: 2; left: 0px; right: 0px;">
			<ul class="nav navbar-nav">
				{% if app.request.get('_route') == 'decibels_homepage' %}
					<li><a style="color: #591820; background-color: #F3F3F3;" href="{{ path('decibels_homepage') }}">Accueil</a></li>
				{% else %}
					<li><a style="color: #FFEB3B;" href="{{ path('decibels_homepage') }}">Accueil</a></li>
				{% endif %}
				{% if app.request.get('_route') == 'decibels_realisation_list' %}
					<li><a style="color: #591820; background-color: #F3F3F3;" href="{{ path('decibels_realisation_list') }}">Réalisations</a></li>	
				{% else %}
					<li><a style="color: #FFEB3B;" href="{{ path('decibels_realisation_list') }}">Réalisations</a></li>	
				{% endif %}
				{% if app.request.get('_route') == 'decibels_presentation' %}
					<li><a style="color: #591820; background-color: #F3F3F3;" href="{{ path('decibels_presentation') }}">L'association</a></li>
				{% else %}
					<li><a style="color: #FFEB3B;" href="{{ path('decibels_presentation') }}">L'association</a></li>
				{% endif %}
				{% if app.request.get('_route') == 'decibels_materiel_list' %}
					<li><a style="color: #591820; background-color: #F3F3F3;" href="{{ path('decibels_materiel_list') }}">Matériel</a></li>
				{% else %}
					<li><a style="color: #FFEB3B;" href="{{ path('decibels_materiel_list') }}">Matériel</a></li>
				{% endif %}
				{% if app.request.get('_route') == 'decibels_contact' %}
					<li><a style="color: #591820; background-color: #F3F3F3;" href="{{ path('decibels_contact') }}">Contact</a></li>
				{% else %}
					<li><a style="color: #FFEB3B;" href="{{ path('decibels_contact') }}">Contact</a></li>
				{% endif %}	
			</ul>
		</nav>
	</header>
	</div>
	
	<div class="row" style="margin-top: 135px;">
		{% for type in ['notice', 'warning', 'error'] %}
			{% for message in app.session.flashbag.get(type) %}
				<div class="alert alert-{{ type }} text-center">
					{{ message }}
				</div>
			{% endfor %}
		{% endfor %}
		{% block banniere %}
		{% endblock %}
		<section class="col-md-9 contenu">
			{% block body %}{% endblock %}
		</section>
		<div class="col-md-3">
			<section>
				{% block panier %}
				{% endblock %}
			</section>
			<section id="player" class="text-center" style="margin-top: 10px;">
				<iframe width="100%" height="300" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/playlists/194757938%3Fsecret_token%3Ds-2YNuU&amp;auto_play=false&amp;hide_related=true&amp;show_comments=true&amp;show_user=false&amp;show_reposts=false&amp;visual=true"></iframe>
			</section>
		</div>
	</div>
	<footer class="row">
	</footer>
	{% block javascript %}{% endblock %}
	{{ tinymce_init() }}
	<script>
		$(document).scroll(function () {
			var dist = $(document).scrollTop();
			if(dist > 80) {
				var size = $('#logo').height();
				if(size == 90) {
					$("#title").fadeOut(100);
					$('#logo').animate({
						height: 40,
						width: 40
					}, 100);
					$('#user').animate({
						height: 40,
						width: 40
					}, 100);
					$(".page-header").animate({
						height: 50
					}, 100);
					$(".pseudoCenter").animate({
						top: 5
					}, 100);
					$(".nav").animate({
						top: 0
					}, 100);
					$("#info").hide();
					$("#info").css("top", "20px");
					$("#info").children().first().css("right", "37.5");
				}	
			}
			else {
				var size = $('#logo').height();
				if(size == 40) {
					$("#title").fadeIn(100);
					$('#logo').animate({
						height: 90,
						width: 90
					}, 100);
					$('#user').animate({
						height: 90,
						width: 90
					}, 100);
					$(".page-header").animate({
						height: 120
					}, 100);
					$(".pseudoCenter").animate({
						top: 15
					}, 100);
					$(".nav").animate({
						top: 70
					}, 100);
					$("#info").hide();
					$("#info").css("top", "70px");
					$("#info").children().first().css("right", "62.5");
				}	
			}
		});
		
		$("#info").fadeOut(0);
		
		$("#user").click(function () {
			if($("#info").css("display") != "none") {
				$("#info").fadeOut(200);
			}
			else {
				$("#info").fadeIn(200);
			}
		});
	</script>
	</div>
</body>
</html>
